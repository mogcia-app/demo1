# ✅ 本番環境テストチェックリスト

**テスト日**: ____________  
**テスター**: ____________  
**環境**: 本番環境（Vercel + Firebase）  
**URL**: https://your-app.vercel.app

---

## 📋 **事前準備**

### **テストアカウント準備**
- [ ✅ ] 一般ユーザーアカウント（メール: test@example.com）
- [ ✅ ] 管理者アカウント（メール: admin@example.com）
- [ ✅ ] テスト用担当者データ（3名以上）
- [ ] テスト用機材データ（10種類以上）
- [ ✅ ] テスト用カテゴリデータ（3種類以上）

### **テスト環境確認**
- [ ✅ ] デスクトップPC（Chrome）
- [ ] タブレット（Safari / Chrome）
- [ ✅ ] スマートフォン（Safari / Chrome）
- [ ✅ ] インターネット接続確認
- [ ] Googleカレンダーアクセス権確認

### **テストデータ準備**
- [ ✅ ] テスト用の現場名リスト（5件以上）
- [ ✅ ] テスト用の場所情報
- [ ✅ ] テスト用の機材番号リスト

---

## 🔐 **1. 認証・ログイン機能**

### **一般ユーザーログイン**
- [ ✅ ] ログインページが正常に表示される（`/login`）
- [ ✅] 正しいメール・パスワードでログイン成功
- [ ✅ ] 間違ったメール・パスワードでエラー表示
- [ ✅] ログイン後、メインページにリダイレクト
- [ ✅] ユーザー名が画面右上に表示される
- [ ✅ ] ログアウトボタンが正常に動作

### **管理者ログイン**
- [ ✅] 管理者ログインページが正常に表示される（`/admin/login`）
- [ ✅] 管理者権限でログイン成功
- [ ✅] 一般ユーザーでログインした場合、エラー表示
- [ ✅] ログイン後、管理者ページにリダイレクト
- [ ✅] 管理者名が画面右上に表示される

### **セッション管理**
- [ ✅] ページリロード後もログイン状態が維持される
- [ ✅] ログアウト後、ログインページにリダイレクト
- [ ✅] 未ログイン時、保護されたページにアクセスできない

---

## 📦 **2. 機材管理機能（一般ユーザー）**

### **機材一覧表示**
- [ ✅ ] 機材一覧が正常に表示される
- [ ✅] 機材番号・名前・カテゴリが表示される
- [✅ ] 在庫数が正確に表示される
- [✅ ] リアルタイムで在庫数が更新される
- [ ] 検索機能が正常に動作
  - [ ] 機材番号で検索
  - [ ] 機材名で検索


### **カテゴリ・グループ管理**
- [ ] カテゴリ別に機材が表示される
- [ ] グループの折りたたみ・展開が動作
- [ ] 「すべて表示」「グループ表示」の切り替え
- [ ] グループごとに機材数が表示される

### **ドラッグ&ドロップ**
- [ ] 機材リストから機材をドラッグできる
- [ ] ドラッグ中のカーソルが変化する
- [ ] 編集モーダルにドロップできる
- [ ] ドロップ後、機材が追加される
- [ ] 重複機材は追加されない

---

## 🏗️ **3. 現場管理機能**

### **現場作成**
- [ ] 「新しい現場を登録」ボタンをクリック
- [ ] サイドパネルが右側からスライドイン表示
- [ ] 現場名を入力できる
- [ ] 開始日・終了日を選択できる
- [ ] 日付の範囲が正しく設定される（終了日 ≥ 開始日）

### **担当者選択（複数選択）**
- [ ] 担当者リストが表示される
- [ ] チェックボックスで複数選択できる
- [ ] 選択中の担当者数が表示される（例: 選択中: 3人）
- [ ] チェックを外すと選択解除される
- [ ] 担当者が登録されていない場合、メッセージ表示

### **場所・メモ入力**
- [ ] 場所を入力できる
- [ ] メモを入力できる（複数行対応）
- [ ] 入力内容が保存される

### **機材選択**
- [ ] 機材番号入力フィールドが表示される
- [ ] 例: `#1*2` で機材番号1を数量2で追加
- [ ] 例: `#1*2,#3*5` で複数機材を一括追加
- [ ] ドラッグ&ドロップで機材を追加
- [ ] 追加された機材が一覧表示される
- [ ] 機材の数量を増減できる（+/- ボタン）
- [ ] 機材の数量を直接入力できる
- [ ] 在庫数を超える数量は入力できない
- [ ] 機材を削除できる（×ボタン）

### **現場保存**
- [ ] 「作成」ボタンをクリック
- [ ] 保存成功のメッセージが表示される
- [ ] 現場一覧に新しい現場が追加される
- [ ] 在庫数が自動的に減少する
- [ ] Googleカレンダーにイベントが登録される

### **現場編集**
- [ ] 現場一覧から「編集」ボタンをクリック
- [ ] サイドパネルが開き、既存データが表示される
- [ ] データを編集できる
- [ ] 「保存」ボタンで更新される
- [ ] 在庫数が正しく調整される（増減）
- [ ] Googleカレンダーのイベントも更新される

### **現場削除**
- [ ] 現場一覧から「削除」ボタンをクリック
- [ ] 確認メッセージが表示される
- [ ] 削除を実行すると現場が削除される
- [ ] 在庫数が自動的に増加する（元に戻る）
- [ ] Googleカレンダーからもイベントが削除される

### **現場プレビュー**
- [ ] 現場一覧から「目アイコン」をクリック
- [ ] 現場詳細モーダルが表示される
- [ ] 基本情報が表示される（現場名、日付、担当者、場所）
- [ ] 複数担当者がカンマ区切りで表示される（例: 田中太郎, 佐藤花子）
- [ ] 使用機材一覧が表示される
- [ ] 機材の数量が表示される
- [ ] メモ・備考が表示される
- [ ] 「編集」ボタンで編集モーダルに遷移
- [ ] 「閉じる」ボタンでモーダルが閉じる

### **PDF出力 / 印刷**
- [ ] 現場詳細プレビューで「印刷/PDF」ボタンをクリック
- [ ] 印刷プレビューが表示される
- [ ] 現場詳細のみが印刷対象（ヘッダー・ボタン非表示）
- [ ] 場所・メモが正しく表示される
- [ ] PDFとして保存できる
- [ ] 印刷が正常に実行される

---

## 👥 **4. 管理者機能**

### **管理者ページアクセス**
- [ ] `/admin` にアクセスできる
- [ ] 一般ユーザーではアクセスできない
- [ ] 管理者メニューが表示される

### **機材管理**
- [ ] 機材一覧が表示される（テーブル形式）
- [ ] 機材番号・名前・カテゴリ・在庫数が表示される
- [ ] 「新規追加」ボタンで機材を追加できる
  - [ ] 機材番号を入力
  - [ ] 機材名を入力
  - [ ] カテゴリを選択（複数）
  - [ ] 在庫数を入力
  - [ ] 保存すると機材が追加される
- [ ] 「編集」ボタンで機材を編集できる
  - [ ] 既存データが表示される
  - [ ] データを変更できる
  - [ ] 保存すると更新される
- [ ] 「削除」ボタンで機材を削除できる
  - [ ] 確認メッセージが表示される
  - [ ] 削除が実行される

### **カテゴリ管理**
- [ ] カテゴリ一覧が表示される
- [ ] カテゴリ名・カラーが表示される
- [ ] 「新規追加」ボタンでカテゴリを追加できる
  - [ ] カテゴリ名を入力
  - [ ] カラーを選択
  - [ ] 保存するとカテゴリが追加される
- [ ] 「編集」ボタンでカテゴリを編集できる
- [ ] 「削除」ボタンでカテゴリを削除できる

### **担当者管理**
- [ ] 担当者一覧が表示される
- [ ] 担当者名・ステータス（有効/無効）が表示される
- [ ] 「新規追加」ボタンで担当者を追加できる
  - [ ] 担当者名を入力
  - [ ] 有効/無効を選択
  - [ ] 保存すると担当者が追加される
- [ ] 「編集」ボタンで担当者を編集できる
- [ ] 「削除」ボタンで担当者を削除できる
- [ ] 無効化された担当者は現場登録時に選択できない

### **在庫調整**
- [ ] 機材の在庫数を直接編集できる
- [ ] トランザクション処理で整合性が保たれる
- [ ] 変更が即座にFirestoreに反映される

---

## 📅 **5. スケジュール機能**

### **機材スケジュールページ**
- [ ] `/schedule` にアクセスできる
- [ ] 月間カレンダーが表示される
- [ ] 現在の月が表示される
- [ ] 前月・次月ボタンで月を移動できる
- [ ] 今日の日付が青丸でハイライト表示

### **イベント表示**
- [ ] カレンダーに現場が表示される
- [ ] 単日の現場（緑色）
- [ ] 日跨ぎの現場（青色、複数日にまたがる）
- [ ] イベントタイトルがフル表示される（改行あり）
- [ ] 1日あたり最大2件表示
- [ ] 3件以上ある場合「+N件」表示

### **日別イベント一覧**
- [ ] 日付セルをクリック
- [ ] その日の現場一覧がモーダル表示される
- [ ] 現場名・期間・担当者・場所・機材数が表示される
- [ ] 複数担当者がカンマ区切りで表示される
- [ ] 単日/日跨ぎのバッジが表示される
- [ ] 現場をクリックすると詳細モーダルに遷移

### **イベント詳細モーダル**
- [ ] 現場名が表示される
- [ ] 開始日・終了日が表示される
- [ ] 期間（N日間）が表示される
- [ ] 場所が表示される
- [ ] 担当者が表示される（複数の場合カンマ区切り）
- [ ] 使用機材一覧が表示される
- [ ] 機材の数量が表示される

### **印刷 / PDF出力**
- [ ] ヘッダーの「印刷/PDF」ボタンをクリック
- [ ] 印刷プレビューが表示される
- [ ] カレンダー全体が印刷対象
- [ ] モーダルは非表示になる
- [ ] PDFとして保存できる

### **Googleカレンダー連携**
- [ ] 現場を登録すると、Googleカレンダーにイベントが作成される
- [ ] 現場を編集すると、Googleカレンダーのイベントも更新される
- [ ] 現場を削除すると、Googleカレンダーのイベントも削除される
- [ ] Googleカレンダーでイベントを確認できる
- [ ] タイトル・日付・場所が正しく同期される

---

## 📱 **6. レスポンシブデザイン**

### **デスクトップ（1200px以上）**
- [ ] すべての要素が正常に表示される
- [ ] レイアウトが崩れない
- [ ] サイドパネルが650px幅で表示される
- [ ] カレンダーが見やすく表示される

### **タブレット（768px〜1200px）**
- [ ] レイアウトが適切に調整される
- [ ] サイドパネルが500px幅で表示される
- [ ] テーブルがスクロール可能
- [ ] ボタン・テキストが読みやすいサイズ

### **スマートフォン（768px以下）**
- [ ] モーダルが全画面表示になる
- [ ] ヘッダーが縦並びレイアウトに変更
- [ ] テーブルがカード形式で表示される（管理者ページ）
- [ ] タッチ操作がスムーズ
- [ ] フォント・ボタンサイズが適切
- [ ] 横スクロールが不要

### **小型スマートフォン（480px以下）**
- [ ] すべての要素が縮小表示される
- [ ] テキストが読みやすい
- [ ] ボタンがタップしやすいサイズ
- [ ] カレンダーが縮小表示される

---

## 🔄 **7. データ整合性・トランザクション**

### **在庫管理のトランザクション**
- [ ] 現場登録時、在庫が正しく減少する
- [ ] 複数機材を同時に登録しても整合性が保たれる
- [ ] 在庫不足時、エラーメッセージが表示される
- [ ] 現場削除時、在庫が正しく増加する
- [ ] 現場編集時、在庫が正しく調整される（増減）

### **同時操作のテスト**
- [ ] 2つのブラウザで同時にログイン
- [ ] 同じ機材を同時に登録
- [ ] 片方が先に保存
- [ ] もう片方が在庫不足エラーになる
- [ ] データの不整合が発生しない

### **後方互換性**
- [ ] 旧データ（単一担当者）が正しく表示される
- [ ] 旧データを編集しても問題なく動作
- [ ] `assigneeId` → `assigneeIds` への自動変換

---

## 🐛 **8. エラーハンドリング**

### **ネットワークエラー**
- [ ] オフライン時にエラーメッセージが表示される
- [ ] 再接続時にデータが正しく読み込まれる
- [ ] 保存失敗時にエラーメッセージが表示される

### **バリデーションエラー**
- [ ] 必須項目が未入力の場合、エラー表示
- [ ] 不正な日付範囲の場合、エラー表示
- [ ] 在庫不足の場合、エラー表示
- [ ] 重複データの場合、エラー表示

### **権限エラー**
- [ ] 一般ユーザーが管理者ページにアクセスできない
- [ ] 未ログイン時、保護されたページにアクセスできない
- [ ] 権限エラー時、適切なメッセージが表示される

---

## 🎨 **9. UI/UX**

### **アニメーション**
- [ ] サイドパネルのスライドインがスムーズ
- [ ] ボタンのホバー効果が動作
- [ ] モーダルの開閉がスムーズ
- [ ] ローディング表示が適切

### **アイコン・ビジュアル**
- [ ] アイコンが統一されている（Lucide Icons）
- [ ] カラースキームが一貫している
- [ ] フォントサイズが読みやすい
- [ ] ボタンがクリックしやすいサイズ

### **ユーザビリティ**
- [ ] 操作が直感的
- [ ] エラーメッセージがわかりやすい
- [ ] 成功メッセージが表示される
- [ ] ローディング状態が明確

---

## 🔒 **10. セキュリティ**

### **認証・認可**
- [ ] パスワードが暗号化されている
- [ ] セッションが安全に管理されている
- [ ] 管理者権限が正しく制限されている
- [ ] 未ログイン時のアクセス制御

### **データ保護**
- [ ] Firestore Rulesが適切に設定されている
- [ ] XSS攻撃対策が実装されている
- [ ] CSRF攻撃対策が実装されている

---

## 📊 **11. パフォーマンス**

### **ページ読み込み速度**
- [ ] 初回読み込みが3秒以内
- [ ] ページ遷移がスムーズ
- [ ] 画像の最適化

### **データベースクエリ**
- [ ] リアルタイム更新がスムーズ
- [ ] 大量データでも遅延がない
- [ ] インデックスが適切に設定されている

---

## ✅ **12. 最終確認**

### **全体動作確認**
- [ ] すべての機能が正常に動作
- [ ] エラーが発生しない
- [ ] データの整合性が保たれている
- [ ] Googleカレンダー連携が正常

### **ドキュメント確認**
- [ ] ユーザーマニュアルが最新
- [ ] 管理者マニュアルが最新
- [ ] クイックスタートガイドが最新
- [ ] FAQが充実している

### **クライアント確認**
- [ ] クライアントの要件を満たしている
- [ ] 追加要望がないか確認
- [ ] 操作方法を説明・デモ実施

---

## 📝 **テスト結果記録**

### **発見されたバグ**

| No. | 発見日 | 機能 | 内容 | 重要度 | 状態 | 修正日 |
|-----|--------|------|------|--------|------|--------|
| 1   |        |      |      |        |      |        |
| 2   |        |      |      |        |      |        |
| 3   |        |      |      |        |      |        |

### **改善提案**

| No. | 機能 | 内容 | 優先度 | 対応予定 |
|-----|------|------|--------|----------|
| 1   |      |      |        |          |
| 2   |      |      |        |          |
| 3   |      |      |        |          |

---

## 🎯 **総合評価**

### **動作状況**
- [ ] 🟢 すべて正常
- [ ] 🟡 一部不具合あり（軽微）
- [ ] 🔴 重大な不具合あり

### **コメント**
```
（テスト結果の総評をここに記入）
```

---

## 📞 **次のステップ**

- [ ] テスト結果を開発チームに報告
- [ ] 発見されたバグの修正
- [ ] 改善提案の検討・実装
- [ ] クライアントへの最終デモ
- [ ] 本番リリース承認

---

**テスト完了日**: ____________  
**承認者**: ____________  
**署名**: ____________


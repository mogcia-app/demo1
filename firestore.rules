rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // タスクコレクションのルール
    match /tasks/{taskId} {
      // 読み取り: 全員許可（デモ用）
      allow read: if true;
      
      // 作成・更新・削除: 全員許可（デモ用）
      // 本番環境では適切な認証ルールを設定してください
      allow create, update, delete: if true;
    }
    
    // 処理済みデータコレクションのルール
    match /processedData/{docId} {
      // 読み取り: 全員許可（デモ用）
      allow read: if true;
      
      // 作成: 全員許可（Functions経由）
      allow create: if true;
      
      // 更新・削除: 禁止
      allow update, delete: if false;
    }
    
    // その他のドキュメント: デフォルトで拒否
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

